/*
 *  Analyser.h
 *  MagicEcho
 *
 *  Created by Paulo Barcelos on 24/08/10.
 *  Copyright 2010 Paulo Barcelos. All rights reserved.
 *
 */

#ifndef _ORGANIZER
#define _ORGANIZER

#include "ofMain.h"
#include "Constants.h"
#include "AnalyserEvents.h"
#include "Echo.h"
#include "Recorder.h"
#include "Player.h"
#include "Sequencer.h"

///////////////////////////////////////////////////////////////////////////////////
// CONSTANTS //////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////
// STRUCTS ////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////
// CLASS DEFINITION ///////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////
class Analyser{
	
public:
	void			setup();
	void			hookRecorder(Recorder* recorderRef);
	
	void			analyseEcho(Echo * echo);
	
	bool			addEchoAtStep(Echo * echo, int step);		//plays that echo in that specifc step
	void			removeEchoFromStep(Echo * echo, int step);	//remove only that echo from that specif step
	
	// events
	AnalyserEvents	events;

private:
	Recorder*		recorderRef;
	Player*			playerRef;
	Sequencer*		sequencerRef;
	
	void			onRecorderEchoRecorded (RecorderRecordedEventArgs &args);
};

#endif