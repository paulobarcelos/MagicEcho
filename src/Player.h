/*
 *  Player.h
 *  MagicEcho
 *
 *  Created by Paulo on 9/21/10.
 *  Copyright 2010 Paulo Barcelos. All rights reserved.
 *
 */

#ifndef _ECHO_PLAYER
#define _ECHO_PLAYER

#include "Echo.h"
#include "Sequencer.h"
#include "Recorder.h"

///////////////////////////////////////////////////////////////////////////////////
// CONSTANTS //////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////
#define				PLAYER_MAX_ECHOES_PER_STEP	10
///////////////////////////////////////////////////////////////////////////////////
// STRUCTS ////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////
// CLASS DEFINITION ///////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////
class Player{
public:
	void			setup ();
	void			hookSequencer(Sequencer * sequencerRef);
	
	bool			addEchoAtStep(int echoLabel, int step);

	// getters
	int*			getSequenceTable();
	
private:
	void			onSequencerTick (SequencerTickEventArgs &args);
	void			createSequenceTable(int numSteps);
	int				*sequenceTable;
	
	Recorder		*recorderRef;
	Sequencer		*sequencerRef;	
	
};

#endif